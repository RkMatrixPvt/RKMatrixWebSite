<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RKMatrix ZeroDB Invoice Generator</title>
    <link rel="icon" type="image/png" href="images/rklogo.png" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

    <style>
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f57c00, #ffa726);
            color: #333;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .topbar {
            background-color: #181716;
            color: white;
            padding: 20px 24px; /* Reduced vertical and horizontal padding */
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.3rem; /* Reduced font size */
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 999;
            width: 100%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

            .topbar h1 {
                margin: 0;
                font-size: 1.7rem; /* Smaller heading */
                font-weight: 600;
                letter-spacing: 1px;
            }



        .brand {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo {
            width: 80px;
            height: 80px;
            object-fit: contain;
        }

        .brand-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .top-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .live-clock {
            font-size: 1rem;
            font-weight: 500;
            color: #ffffff;
        }

        .logout-btn {
            background-color: #e53935;
            color: white;
            border: none;
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }

            .logout-btn:hover {
                background-color: #c62828;
            }

        .sidebar {
            position: fixed;
            top: 80px;
            left: 0;
            width: 180px;
            height: calc(100% - 80px);
            background-color: #181716;
            padding-top: 40px;
            display: flex;
            flex-direction: column;
            box-shadow: 2px 0 8px rgba(0,0,0,0.05);
        }

            .sidebar a {
                display: flex;
                align-items: center;
                padding: 12px 20px;
                text-decoration: none;
                color: #fff;
                font-weight: 500;
                font-size: 16px;
                transition: background-color 0.3s;
            }

                .sidebar a i {
                    margin-right: 10px;
                    font-size: 18px;
                    width: 20px;
                    text-align: center;
                }

                .sidebar a.active,
                .sidebar a:hover {
                    background-color: #f57c00;
                    color: #181716;
                }


        .container {
            margin: auto;
            padding: 120px 60px 40px;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.12);
            flex: 1;
            min-height: 100vh;
            max-width: 900px;
            margin-right: auto;
            margin-top: 40px;
        }

        h2 {
            text-align: center;
            color: #f57c00;
            font-size: 2.2rem;
            margin-bottom: 30px;
            font-weight: 700;
            letter-spacing: 1px;
        }

        form label {
            display: block;
            margin-top: 22px;
            font-weight: 600;
            color: #333;
            font-size: 1.1rem;
        }

        form input {
            width: 100%;
            max-width: 700px;
            padding: 14px;
            margin-top: 8px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            background: #fafafa;
            transition: border 0.2s;
        }

            form input:focus {
                border-color: #f57c00;
                outline: none;
            }

        .button-row {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: flex-start;
        }

            .button-row button {
                padding: 6px 12px;
                font-size: 13px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                transition: background 0.3s ease;
            }

        .add-item-btn {
            background-color: #4CAF50;
            color: white;
        }

            .add-item-btn:hover {
                background-color: #45a049;
            }

        .submit-btn {
            background-color: #007BFF;
            color: white;
        }

            .submit-btn:hover {
                background-color: #0056b3;
            }

        /*.button-row {
            display: flex;
            gap: 10px;*/ /* space between buttons */
        /*margin-top: 20px;
        }

        .submit-btn, .add-item-btn, .download-btn {
            margin-top: 30px;
            padding: 14px 30px;
            background-color: #f57c00;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

            .submit-btn:hover, .add-item-btn:hover, .download-btn:hover {
                background-color: #e65100;
            }

        .add-item-btn {
            background-color: #43a047;
            margin-right: 10px;
        }

            .add-item-btn:hover {
                background-color: #2e7d32;
            }*/

        #invoice {
            display: none;
            margin-top: 40px;
            border-top: 3px dashed #ccc;
            padding-top: 30px;
        }

        #commonInvoice {
            display: none;
            margin-top: 40px;
            border-top: 3px dashed #ccc;
            padding-top: 30px;
        }

        .logo-header {
            display: flex;
            align-items: center;
            gap: 20px;
            background-color: #181716;
            padding: 16px;
            border-radius: 8px;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
            color: white;
        }

            .logo-header img {
                height: 100px;
            }

        .logo-text h3 {
            margin: 0;
            font-size: 24px;
            letter-spacing: 1px;
        }

        .logo-text .tagline {
            font-size: 14px;
            color: #ff9800;
            margin-top: 4px;
        }

        .info {
            margin: 20px 0;
            font-size: 16px;
            font-weight: 500;
            text-align: center;
        }

        .info, table, .footer {
            width: 100%;
            margin: 20px 0;
            text-align: center;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
        }


        .footer {
            background-color: #181716;
            color: white;
            padding: 20px;
            margin-top: 30px;
            font-size: 14px;
            border-radius: 6px;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
            text-align: center;
        }

            .footer a {
                color: #ffa726;
                text-decoration: none;
                font-weight: 500;
            }

        .download-btn {
            display: block;
            margin: 25px auto 0;
            background-color: #039be5;
            padding: 6px 12px;
            font-size: 13px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .delete-btn {
            background: none;
            border: none;
            color: red;
            font-size: 16px;
            cursor: pointer;
        }

        .total-highlight {
            background-color: #e0f2f1;
            font-weight: bold;
            font-size: 16px;
        }

        @media print {
            body * {
                visibility: hidden;
            }

            #invoice, #invoice * {
                visibility: visible;
            }

            #invoice {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
            }

            .download-btn {
                display: none;
            }
        }

        @media (max-width: 1100px) {
            .container {
                max-width: 100%;
                padding: 100px 20px 40px;
            }
        }

        @media (max-width: 900px) {
            .container {
                margin-left: 0;
                padding: 100px 10px 40px;
            }

            .sidebar {
                position: static;
                width: 100%;
                height: auto;
                flex-direction: row;
                justify-content: space-around;
                padding-top: 0;
            }

                .sidebar a {
                    padding: 10px;
                    font-size: 16px;
                }

                    .sidebar a i {
                        margin-right: 8px;
                    }
        }

        @media (max-width: 600px) {
            .topbar {
                flex-direction: column;
                align-items: flex-start;
                padding: 10px 10px;
                font-size: 1.2rem;
            }

            .sidebar {
                flex-direction: column;
                align-items: stretch;
                width: 100%;
                position: static;
                height: auto;
                padding-top: 0;
            }

            .container {
                margin-left: 0;
                padding: 80px 4px 20px;
                border-radius: 0;
                box-shadow: none;
                min-width: 0;
            }

            .logo-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
                padding: 10px;
            }

            .submit-btn, .add-item-btn, .download-btn {
                width: 100%;
                font-size: 1rem;
                padding: 10px 0;
            }

            th, td {
                font-size: 0.95rem;
                padding: 8px;
            }

            table {
                font-size: 0.95rem;
                overflow-x: auto;
                display: block;
            }

            form input {
                font-size: 0.95rem;
                padding: 8px;
            }

            h2 {
                font-size: 1.3rem;
            }

            .footer {
                font-size: 12px;
                padding: 12px;
            }
        }

        @media (max-width: 900px) {
            .container {
                margin-left: 0;
                padding: 100px 10px 40px;
            }

            .sidebar a {
                display: flex;
                align-items: center;
                padding: 12px 20px;
                text-decoration: none;
                color: #fff;
                font-weight: 500;
                font-size: 16px;
                transition: background-color 0.3s;
            }

                .sidebar a i {
                    margin-right: 10px;
                    font-size: 18px;
                    width: 20px;
                    text-align: center;
                }

                .sidebar a.active,
                .sidebar a:hover {
                    background-color: #f57c00;
                    color: #181716;
                }
        }

        @media (max-width: 600px) {
            .topbar {
                flex-direction: column;
                align-items: flex-start;
                padding: 10px 10px;
                font-size: 1.2rem;
            }

                .topbar h1 {
                    font-size: 1.3rem;
                    margin-bottom: 8px;
                }

                .topbar > div {
                    width: 100%;
                    text-align: right;
                    font-size: 1rem;
                    margin-bottom: 0;
                }

            .sidebar {
                flex-direction: row;
                width: 100%;
                position: static;
                height: auto;
                padding-top: 0;
                background-color: #232323;
                box-shadow: none;
                justify-content: space-around;
            }

                .sidebar a {
                    padding: 10px 0;
                    font-size: 0.95rem;
                    border-radius: 0;
                    text-align: center;
                    flex: 1;
                }

                    .sidebar a i {
                        margin-right: 8px;
                    }
        }

        .menu-toggle {
            display: none;
            position: fixed;
            top: 18px;
            left: 18px;
            z-index: 1001;
            background: #181716;
            color: #fff;
            border: none;
            font-size: 2rem;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
        }

        .menu-link.active {
            background-color: #f57c00;
            color: #181716;
        }

        .menu-icon {
            fill: #ffffff;
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }

        .menu-link img.menu-icon {
            width: 18px;
            height: 18px;
            vertical-align: middle;
            margin-right: 10px;
            filter: invert(1); /* makes it white on dark background */
        }


        @media (max-width: 900px) {
            .menu-toggle {
                display: block;
            }

            .sidebar {
                display: none;
                position: fixed;
                top: 60px;
                left: 0;
                width: 100%;
                height: auto;
                background: #232323;
                flex-direction: column;
                box-shadow: 0 2px 8px rgba(0,0,0,0.08);
                z-index: 1000;
            }

                .sidebar.open {
                    display: flex;
                }
        }

        .welcome-box {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            margin: 20px 0 40px;
            animation: slideFade 0.6s ease-out;
            transition: box-shadow 0.3s ease;
        }

            .welcome-box:hover {
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
            }

            .welcome-box h3 {
                margin: 0 0 8px;
                color: #e65100;
                font-size: 1.5rem;
                font-weight: 600;
            }

            .welcome-box p {
                margin: 0;
                font-size: 1.05rem;
                color: #444;
            }

        .welcome-buttons {
            margin-top: 16px;
        }

            .welcome-buttons button {
                background: #ffb74d;
                border: none;
                padding: 10px 16px;
                margin-right: 10px;
                border-radius: 8px;
                color: #fff;
                font-weight: 600;
                cursor: pointer;
                transition: background 0.3s ease;
            }

                .welcome-buttons button:hover {
                    background: #fb8c00;
                }

        @keyframes slideFade {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tip-box {
            background: #fff8e1;
            padding: 16px 20px;
            border-left: 5px solid #f57c00;
            font-size: 1rem;
            border-radius: 8px;
            margin: 20px 0;
        }

        .quote-box {
            background: #fce4ec;
            padding: 12px 20px;
            border-left: 5px solid #d81b60;
            border-radius: 10px;
            margin-bottom: 30px;
            font-style: italic;
            color: #880e4f;
            box-shadow: 0 2px 10px rgba(0,0,0,0.06);
        }

        .logo-text h1 {
            margin: 0;
            font-size: 32px;
        }

        .logo-text p {
            margin: 0;
            font-size: 12px;
            color: #d16a44;
        }



        @media print {

            @media print {
                body * {
                    visibility: hidden !important;
                }

                #invoice, #invoice * {
                    visibility: visible !important;
                    -webkit-print-color-adjust: exact !important;
                    print-color-adjust: exact !important;
                    color-adjust: exact !important;
                }

                #invoice {
                    position: absolute !important;
                    left: 0;
                    top: 0;
                    width: 100% !important;
                    padding: 20px;
                    background: white !important;
                    z-index: 9999;
                }

                .download-btn {
                    display: none !important;
                }

                /* Ensure headers retain their background color */
                .logo-header {
                    background-color: #000 !important;
                    color: white !important;
                    padding: 12px 16px;
                    border-radius: 10px;
                    display: flex;
                    align-items: center;
                    gap: 12px;
                }

                    .logo-header img {
                        height: 40px !important;
                        width: auto !important;
                    }

                .logo-text h3 {
                    color: white !important;
                    margin: 0;
                    font-size: 18px;
                }

                .logo-text .tagline {
                    color: orange !important;
                    font-size: 13px;
                    margin: 0;
                }

                h2 {
                    color: orange !important;
                    text-align: center;
                    margin: 16px 0;
                }

                .status-box-paid {
                    background-color: #4CAF50 !important;
                    color: white !important;
                    padding: 8px 12px;
                    border-radius: 5px;
                    margin: 10px auto;
                    display: inline-block;
                    text-align: center;
                }

                table,
                th,
                td {
                    border: 1px solid #000 !important;
                    border-collapse: collapse;
                }

                    table th,
                    table td {
                        padding: 8px;
                        font-size: 14px;
                        text-align: left;
                    }

                .footer {
                    background-color: #000 !important;
                    color: white !important;
                    padding: 10px 16px;
                    border-radius: 10px;
                    margin-top: 20px;
                    text-align: center;
                }

                    .footer a {
                        color: orange !important;
                        text-decoration: none;
                        font-weight: bold;
                    }

                /* Prevent elements from breaking across pages */
                .logo-header,
                .status-box-paid,
                table,
                .footer {
                    page-break-inside: avoid !important;
                    break-inside: avoid !important;
                }

                body {
                    -webkit-print-color-adjust: exact !important;
                    print-color-adjust: exact !important;
                    color-adjust: exact !important;
                    font-size: 13px !important;
                }
            }
        }




        @media print {
            body * {
                visibility: hidden !important;
            }

            #commonInvoice, #commonInvoice * {
                visibility: visible !important;
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                color-adjust: exact !important;
            }

            #commonInvoice {
                position: absolute !important;
                left: 0;
                top: 0;
                width: 100% !important;
                padding: 20px;
                background: white !important;
                z-index: 9999;
            }

            .download-btn {
                display: none !important;
            }

            /* Ensure headers retain their background color */
            .logo-header {
                background-color: #000 !important;
                color: white !important;
                padding: 12px 16px;
                border-radius: 10px;
                display: flex;
                align-items: center;
                gap: 12px;
            }

                .logo-header img {
                    height: 40px !important;
                    width: auto !important;
                }

            .logo-text h3 {
                color: white !important;
                margin: 0;
                font-size: 18px;
            }

            .logo-text .tagline {
                color: orange !important;
                font-size: 13px;
                margin: 0;
            }

            h2 {
                color: orange !important;
                text-align: center;
                margin: 16px 0;
            }

            .status-box-paid {
                background-color: #4CAF50 !important;
                color: white !important;
                padding: 8px 12px;
                border-radius: 5px;
                margin: 10px auto;
                display: inline-block;
                text-align: center;
            }

            table,
            th,
            td {
                border: 1px solid #000 !important;
                border-collapse: collapse;
            }

                table th,
                table td {
                    padding: 8px;
                    font-size: 14px;
                    text-align: left;
                }

            .footer {
                background-color: #000 !important;
                color: white !important;
                padding: 10px 16px;
                border-radius: 10px;
                margin-top: 20px;
                text-align: center;
            }

                .footer a {
                    color: orange !important;
                    text-decoration: none;
                    font-weight: bold;
                }

            /* Prevent elements from breaking across pages */
            .logo-header,
            .status-box-paid,
            table,
            .footer {
                page-break-inside: avoid !important;
                break-inside: avoid !important;
            }

            body {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
                color-adjust: exact !important;
                font-size: 13px !important;
            }
        }

        .status-select, .input-box, input[type="date"], input[type="text"], input[type="number"] {
            width: 100%;
            padding: 6px 10px;
            font-size: 14px;
            margin-top: 5px;
            box-sizing: border-box;
        }

        /*.status-select {
            padding: 15px 20px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-weight: bold;
            min-width: 180px;
        }*/

        .status-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 15px;
        }

        .status-box-paid {
            background-color: #76c776;
            margin-top: 10px;
            padding: 8px 12px;
            border-radius: 6px;
            display: inline-block;
            font-weight: bold;
            font-size: 14px;
        }

        .status-box-other {
            background-color: #e53935;
            margin-top: 10px;
            padding: 8px 12px;
            border-radius: 6px;
            display: inline-block;
            font-weight: bold;
            font-size: 14px;
        }

        .status-box-pppaymnet {
            background-color: #e5ce35;
            margin-top: 10px;
            padding: 8px 12px;
            border-radius: 6px;
            display: inline-block;
            font-weight: bold;
            font-size: 14px;
        }

        .two-column-row {
            display: flex;
            gap: 20px;
            margin-bottom: -15px;
            flex-wrap: wrap;
        }

            .two-column-row label {
                flex: 1;
                display: flex;
                flex-direction: column;
                font-size: 13px;
            }

            .two-column-row input {
                padding: 8px 8px;
                font-size: 13px;
                border: 1px solid #ccc;
                border-radius: 4px;
            }
    </style>

</head>
<body>
    <div class="topbar">
        <div class="brand">
            <img src="images/rklogo.png" alt="Logo" class="logo" />
            <div class="logo-text">
                <h1>RKMatrix</h1>
                <p>Your Digital Vision, Our Matrix of Code.</p>
            </div>
        </div>

        <div class="top-right">
            <div class="live-clock" id="liveClock">üïí --:--:--</div>
            <button class="logout-btn" onclick="handleLogout()">üîì Logout</button>
        </div>
    </div>
    <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>
    <div class="sidebar">

        <a href="#" class="menu-link" onclick="showSection('dashboardSection', this)">
            <svg class="menu-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8v-10h-8v10zm0-18v6h8V3h-8z" />
            </svg>
            Dashboard
        </a>

        <a href="#" class="menu-link" onclick="showSection('invoiceGeneratorSection', this)">
            <svg class="menu-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 2H8c-1.1 0-2 .9-2 2v3H5c-1.1 0-2 .9-2 2v11c0
    1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0
    16H5V9h14v9zm0-11H8V4h11v3z" />
            </svg> Invoices
        </a>

        <!--<a href="#" class="menu-link" onclick="showSection('statementsSection', this)">
            <svg class="menu-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 6h16v2H4zm0 4h10v2H4zm0 4h16v2H4zm0 4h10v2H4z" />
            </svg> Statements
        </a>-->
    </div>





    <div class="container">

        <div id="dashboardSection">
            <div class="welcome-box">
                <h2>Dashboard</h2>
                <div class="welcome-box">
                    <h3 id="greetingText">üëã Hello Rahul,</h3>
                    <p>Welcome back to your <strong>RKMatrix ZeroDB Invoice Portal</strong>. Ready to create something amazing today?</p>
                    <div class="welcome-buttons">
                        <button onclick="showSection('invoiceGeneratorSection', this)">üìÑ Create Invoice</button>
                        <button onclick="alert('Coming soon!')">üìä View Reports</button>
                    </div>
                </div>
            </div>
            <div class="tip-box" id="tipBox">
                üí° <em>Tip of the Day:</em> <span id="dailyTip">"Use meaningful invoice numbers to track clients easily."</span>
            </div>
            <div class="quote-box">
                "The secret of getting ahead is getting started." ‚Äî Mark Twain
            </div>
        </div>

        <div id="invoiceGeneratorSection" style="display: none;">
            <div id="rkMatrixInvoiceSection" style="display: none;">
                <h2>ZeroDB Invoice Generator</h2>
                <form id="invoiceForm">
                    <div class="two-column-row">
                        <label>Invoice Number: <input type="text" name="invoiceNumber" required></label>
                        <label>Invoice Date: <input type="date" name="invoiceDate" required></label>
                    </div>
                    <div class="two-column-row">
                        <label>GST No. (If Applicable): <input type="text" name="invoiceGst"></label>
                        <label>
                            Gst %:
                            <select id="invoiceGstPercent" class="status-select">
                                <option value="">-- Select Gst % --</option>
                                <option value="0">0 %</option>
                                <option value="5">5 %</option>
                                <option value="12">12 %</option>
                                <option value="18">18 %</option>
                                <option value="28">28 %</option>
                                <option value="3">3 %</option>
                                <option value="0.25">0.25 %</option>
                            </select>
                        </label>
                    </div>
                    <div class="two-column-row">
                        <label>Client Name: <input type="text" name="client" required></label>
                        <label>Project: <input type="text" name="project" required></label>
                    </div>
                    <div class="two-column-row">
                        <label>Scope: <input type="text" name="scope" required></label>
                    </div>
                    <div class="two-column-row">
                        <label>
                            Payment Status:
                            <select id="PaymentStatusDropDown" class="status-select">
                                <option value="">-- Select Payment Status --</option>
                                <option value="Paid">Paid</option>
                                <option value="Unpaid">Unpaid</option>
                                <option value="Partially Paid">Partially Paid</option>
                                <!--<option value="Overdue">Overdue</option>-->
                            </select>
                        </label>
                        <label id="mainPartialAmountWrapper" style="display: none;">
                            Enter Partial Paid Amount:
                            <input type="number" id="mainPartialPaidAmount" min="0" class="input-box" placeholder="Enter amount..." />
                        </label>

                    </div>

                    <h4>Invoice Items</h4>
                    <table id="itemTable">
                        <tr><th>Description</th><th>Amount (‚Çπ)</th><th></th></tr>
                        <tr>
                            <td><input type="text" name="desc[]" required></td>
                            <td><input type="number" name="amount[]" required></td>
                            <td><button type="button" class="delete-btn" onclick="deleteRow(this)">‚ùå</button></td>
                        </tr>
                    </table>
                    <!--<label>
    Payment Status: <select id="PaymentStatusDropDown" class="status-select">
        <option value="">-- Select Payment Status --</option>
        <option value="Paid">Paid</option>
        <option value="Unpaid">Unpaid</option>
        <option value="Partially Paid">Partially Paid</option>-->
                    <!--<option value="Overdue">Overdue</option>-->
                    <!--</select>
    </label>-->
                    <!-- Hidden input field shown only for Partially Paid -->
                    <!--<div id="mainPartialAmountWrapper" style="display: none; margin-top: 10px;">
        <label>
            Enter Partial Paid Amount:
            <input type="number" id="mainPartialPaidAmount" min="0" class="input-box" placeholder="Enter amount..." />
        </label>
    </div>-->

                    <div class="button-row">
                        <button type="button" class="add-item-btn" onclick="addItem()">‚ûï Add Item</button><br>
                        <button type="submit" class="submit-btn">üìÑ Preview Invoice</button>
                    </div>

                    <!--<div class="button-row">
                        <button type="button" class="add-item-btn" onclick="addItem()">Add Item</button><br>
                        <button type="submit" class="submit-btn">Priview Invoice</button>
                    </div>-->
                </form>

                <div id="invoice">
                    <div class="logo-header">
                        <img src="images/rklogo.png" alt="RKMatrix Logo" />
                        <div class="logo-text">
                            <h3>RKMatrix</h3>
                            <p class="tagline">YOUR DIGITAL VISION, OUR MATRIX OF CODE</p>
                        </div>
                    </div>

                    <h2>Invoice</h2>
                    <div class="info" id="invoiceInfo"></div>
                    <div class="status-container" id="paymnetStatus">
                        <div class="status-box-paid"><strong>Payment Status:</strong> paymentStatus &nbsp;&nbsp; <strong>Payment Date:</strong> formattedDate</div>
                    </div>

                    <table>
                        <tr><th>Client</th><td id="clientOut"></td></tr>
                        <tr><th>Project</th><td id="projectOut"></td></tr>
                        <tr><th>Scope</th><td id="scopeOut"></td></tr>
                    </table>


                    <table id="summaryTable">
                        <tr><th>Description</th><th>Amount (‚Çπ)</th></tr>
                    </table>

                    <div class="footer">
                        <p>Thank you for choosing RKMatrix!</p>
                        <p>
                            <a href="https://www.rkMatrix.co.in" target="_blank">www.rkMatrix.co.in</a> | RKMatrixPvt@gmail.com
                        </p>
                    </div>
                    <button class="download-btn" onclick="printInvoice()">üñ®Ô∏è Download PDF</button>
                    <!--<button class="download-btn" onclick="window.print()">üñ®Ô∏è Download PDF</button>-->
                </div>
            </div>

            <div id="commonInvoiceGeneratorSection">
                <h2 style="margin-bottom:0px !important">ZeroDB Invoice Generator</h2>
                <form id="commonInvoiceForm">
                    <div class="two-column-row">
                        <label>Invoice Number: <input type="text" name="commonInvoiceNumber" required></label>
                        <label>Invoice Date: <input type="date" name="commonInvoiceDate" required></label>
                    </div>
                    <div class="two-column-row">
                        <label>GST No. (If Applicable): <input type="text" name="commonGst"></label>
                        <label>
                            Gst %:
                            <select id="commonGstPercent" class="status-select">
                                <option value="">-- Select Gst % --</option>
                                <option value="0">0 %</option>
                                <option value="5">5 %</option>
                                <option value="12">12 %</option>
                                <option value="18">18 %</option>
                                <option value="28">28 %</option>
                                <option value="3">3 %</option>
                                <option value="0.25">0.25 %</option>
                            </select>
                        </label>
                    </div>
                    <div class="two-column-row">
                        <label>Invoice to: <input type="text" name="commonIClient" required></label>
                        <label>Contect Details: <input type="text" name="commonContectDetails" required></label>
                    </div>
                    <div class="two-column-row">
                        <label>Address: <input type="text" name="commonAddress" required></label>
                    </div>

                    <div class="two-column-row">
                        <label>
                            Payment Status:
                            <select id="commonPaymentStatusDropDown" class="status-select">
                                <option value="">-- Select Payment Status --</option>
                                <option value="Paid">Paid</option>
                                <option value="Unpaid">Unpaid</option>
                                <option value="Partially Paid">Partially Paid</option>
                            </select>
                        </label>
                        <label id="partialAmountWrapper" style="display: none;">
                            Enter Partial Paid Amount:
                            <input type="number" id="partialPaidAmount" min="0" class="input-box" placeholder="Enter amount..." />
                        </label>

                    </div>
                    <h4 style="margin-bottom: -16px !important">Invoice Items</h4>
                    <table id="commonItemTable">
                        <tr>
                            <th>Item Description</th>
                            <th>Price (‚Çπ)</th>
                            <th>Qty.</th>
                            <!--<th>Amount (‚Çπ)</th>-->
                            <th></th>
                        </tr>
                        <tr>
                            <td><input type="text" name="desc[]" required></td>
                            <td><input type="number" name="price[]" required></td>
                            <td><input type="number" name="qty[]" required></td>
                            <!--<td><input type="number" name="amount[]" required></td>-->
                            <td><button type="button" class="delete-btn" onclick="deleteRow(this)">‚ùå</button></td>
                        </tr>
                    </table>

                    <div class="button-row">
                        <button type="button" class="add-item-btn" onclick="commonAddItem()">‚ûï Add Item</button><br>
                        <button type="submit" class="submit-btn">üìÑ Preview Invoice</button>
                    </div>

                </form>

                <div id="commonInvoice">
                    <div class="logo-header">
                        <img id="orgLogo" src="images/rklogo.png" alt="RKMatrix Logo" />
                        <div class="logo-text">
                            <h3 id="orgName"></h3>
                            <p class="tagline" id="orgTagline"></p>
                        </div>
                    </div>

                    <h2>Invoice</h2>
                    <div class="info" id="commonInvoiceInfo"></div>
                    <div class="status-container" id="commonPaymnetStatus"></div>


                    <table>
                        <tr><th style="width:150px">Invoice to :</th><td id="invoiceto"></td></tr>
                        <tr><th style="width:150px">Contact Details :</th><td id="contactDetails"></td></tr>
                        <tr><th style="width:150px">Address :</th><td id="address"></td></tr>
                    </table>

                    <div class="info" id="paymnetStatus"></div>

                    <table id="commonSummaryTable">
                        <tr>
                            <th>SL.</th>
                            <th>Item Description</th>
                            <th>Price (‚Çπ)</th>
                            <th>Qty.</th>
                            <th>Amount (‚Çπ)</th>
                            <th>Action</th>
                        </tr>
                    </table>

                    <div class="footer">
                        <p id="orgThanksMsg"></p>
                        <p id="orgFotterDetails"></p>
                        <p>Service provided by <a href="https://www.rkMatrix.co.in" target="_blank">RKMatrix</a></p>
                    </div>
                    <button class="download-btn" onclick="printCommonInvoice()">üñ®Ô∏è Download PDF</button>
                </div>
            </div>

        </div>
    </div>

    <!--<div id="statementsSection" style="display: none;">
        <h2>Statements</h2>
        <p>This section will show account or payment statements.</p>
    </div>-->
    <script src="js/loginCheck.js"></script>
    <script>

        //document.addEventListener('contextmenu', function (e) {
        //    e.preventDefault();
        //});

        const org = '';
        // üëã Greeting logic
        const hour = new Date().getHours();
        const authData = JSON.parse(localStorage.getItem("authData"));
        // Only show greeting if logged in and name is available
        if (authData?.isLoggedIn && authData?.name) {
            let greeting = `üëã Hello ${authData.name}`;
            if (hour < 12) greeting += " Good Morning üåÖ";
            else if (hour < 18) greeting += " Good Afternoon ‚òÄÔ∏è";
            else greeting += " Good Evening üåô";

            document.getElementById("greetingText").innerText = greeting;
        } else {
            document.getElementById("greetingText").innerText = "üëã Welcome Guest";
        }



        function toggleMenu() {
            document.querySelector('.sidebar').classList.toggle('open');
        }

        function showSection(sectionId, clickedLink = null) {
            const sections = ['dashboardSection', 'invoiceGeneratorSection', 'statementsSection'];
            const links = document.querySelectorAll('.menu-link');

            // Show/hide sections
            sections.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.style.display = (id === sectionId) ? 'block' : 'none';
            });

            // Update active menu styling
            links.forEach(link => link.classList.remove('active'));
            if (clickedLink) clickedLink.classList.add('active');

            // Save selected section
            localStorage.setItem("activeSection", sectionId);

            // Close sidebar on mobile
            if (window.innerWidth <= 900) {
                document.querySelector('.sidebar').classList.remove('open');
            }
        }

        // Load the last active section (or dashboard) on page load
        document.addEventListener('DOMContentLoaded', () => {
            const savedSection = localStorage.getItem("activeSection") || 'dashboardSection';
            const correspondingLink = document.querySelector(`.menu-link[data-section="${savedSection}"]`);
            showSection(savedSection, correspondingLink);
        });

        // üí° Tip of the day
        const tips = [
            "Use meaningful invoice numbers to track clients easily.",
            "Double-check GST and tax fields before finalizing.",
            "You can save invoices as PDFs for easy sharing.",
            "Keep client info consistent to avoid confusion.",
            "Break down project scope clearly for transparency."
        ];
        document.getElementById('dailyTip').innerText = tips[Math.floor(Math.random() * tips.length)];

        // ‚è≥ Live clock
        function updateClock() {
            const now = new Date();
            const clock = document.getElementById("liveClock");
            if (clock) {
                clock.innerText = "üïí " + now.toLocaleTimeString();
            }
        }
        setInterval(updateClock, 1000);
        updateClock();



        document.addEventListener("DOMContentLoaded", function () {
            const authData = JSON.parse(localStorage.getItem("authData"));
            if (!authData || !authData.organizationname) return;

            const org = authData.organizationname.trim().toLowerCase();

            if (org === "rkmatrix") {
                // Show RKMatrix-specific section
                document.getElementById("rkMatrixInvoiceSection").style.display = "block";
                document.getElementById("commonInvoiceGeneratorSection").style.display = "none";
            } else {
                // Show default invoice section
                document.getElementById("commonInvoiceGeneratorSection").style.display = "block";
                document.getElementById("rkMatrixInvoiceSection").style.display = "none";
            }
        });



        // üß† Format date as "14 July 2025"
        function formatFullDate(dateStr) {
            const dateObj = new Date(dateStr);
            const options = { day: 'numeric', month: 'long', year: 'numeric' };
            return dateObj.toLocaleDateString('en-GB', options);
        }

        // üöÄ Page load
        window.onload = function () {
            // Restore last section from localStorage or default to dashboard
            const lastSection = localStorage.getItem("activeSection") || 'dashboardSection';

            const targetLink = Array.from(document.querySelectorAll('.menu-link')).find(link =>
                link.getAttribute('onclick')?.includes(lastSection)
            );

            showSection(lastSection, targetLink);
            const authData = JSON.parse(localStorage.getItem("authData"));
            if (!authData || !authData.organizationname) return;

            const org = authData.organizationname.trim().toLowerCase();

            // Pre-fill invoice fields
            var invoiceNumber = '';
            const todayISO = new Date().toISOString().split('T')[0];
            debugger;
            if (org === "rkmatrix") {
                invoiceNumber = 'RKMX-' + Date.now();
                document.querySelector('input[name="invoiceNumber"]').value = invoiceNumber;
                document.querySelector('input[name="invoiceDate"]').value = todayISO;
            }
            else {
                invoiceNumber = Date.now();
                document.querySelector('input[name="commonInvoiceNumber"]').value = invoiceNumber;
                document.querySelector('input[name="commonInvoiceDate"]').value = todayISO;
            }
        };

        // ‚ûï Add invoice item row
        function addItem() {
            debugger;
            const table = document.getElementById('itemTable');
            const row = table.insertRow();
            row.insertCell(0).innerHTML = '<input type="text" name="desc[]" required />';
            row.insertCell(1).innerHTML = '<input type="number" name="amount[]" required />';
            row.insertCell(2).innerHTML = '<button type="button" class="delete-btn" onclick="deleteRow(this)">‚ùå</button>';

        }

        function commonAddItem() {
            const table = document.getElementById('commonItemTable');
            const row = table.insertRow();
            row.insertCell(0).innerHTML = '<input type="text" name="desc[]" required />';
            row.insertCell(1).innerHTML = '<input type="number" name="price[]" required />';
            row.insertCell(2).innerHTML = '<input type="number" name="qty[]" required />';
            /* row.insertCell(3).innerHTML = '<input type="number" name="amount[]" required />';*/
            row.insertCell(3).innerHTML = '<button type="button" class="delete-btn" onclick="commonDeleteRow(this)">‚ùå</button>';
        }

        // ‚ùå Delete invoice item row
        function deleteRow(btn) {
            const row = btn.closest('tr');
            const table = document.getElementById('itemTable');
            if (table.rows.length > 2) {
                row.remove();
            } else {
                alert("At least one invoice item is required.");
            }
        }

        function commonDeleteRow(btn) {
            const row = btn.closest('tr');
            const table = document.getElementById('commonItemTable');
            if (table.rows.length > 2) {
                row.remove();
            } else {
                alert("At least one invoice item is required.");
            }
        }

        // üìÑ Generate invoice
        document.getElementById('invoiceForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const formData = new FormData(e.target);

            const authData = JSON.parse(localStorage.getItem("authData"));
            if (!authData || !authData.organizationname) return;

            const org = authData.organizationname.trim().toLowerCase();
            if (org === "rkmatrix") {
                const paymentStatus = document.getElementById("PaymentStatusDropDown").value;
                const partialPaidAmount = document.getElementById("mainPartialPaidAmount").value;
                if (!paymentStatus) {
                    alert("Please select a Payment Status before generating the invoice.");
                    return;
                }
                if (paymentStatus === "Partially Paid") {
                    if (partialPaidAmount == "0" || partialPaidAmount == "") {
                        alert("Please enter a valid positive number for Partial Paid Amount.");
                        return; // stop execution
                    }
                }
                const invoiceNumber = formData.get('invoiceNumber');
                const rawDate = formData.get('invoiceDate');
                const formattedDate = formatFullDate(rawDate);

                document.getElementById('invoiceInfo').innerHTML =
                    `<strong>Invoice No: </strong> ${invoiceNumber} &nbsp;&nbsp; <strong>Date:</strong> ${formattedDate}`;

                document.getElementById('clientOut').innerText = formData.get('client');
                document.getElementById('projectOut').innerText = formData.get('project');
                document.getElementById('scopeOut').innerText = formData.get('scope');

                if (paymentStatus === "Paid") {
                    document.getElementById('paymnetStatus').innerHTML = `<div class="status-box-paid" ><strong>Payment Status:</strong> <span>${paymentStatus}</span> &nbsp;&nbsp; <strong>Payment Date:</strong> ${formattedDate}</div>`;
                } else {
                    document.getElementById('paymnetStatus').innerHTML = `<div class="status-box-other" ><strong>Payment Status:</strong> <span>${paymentStatus}</span> &nbsp;&nbsp; <strong>Payment Date:</strong> ${formattedDate}</div>`;
                }

                const descList = formData.getAll('desc[]');
                const amountList = formData.getAll('amount[]');
                const summaryTable = document.getElementById('summaryTable');
                summaryTable.innerHTML = '<tr><th>Description</th><th>Amount (‚Çπ)</th></tr>';

                let total = 0;
                descList.forEach((desc, i) => {
                    const amount = parseFloat(amountList[i]) || 0;
                    const row = summaryTable.insertRow();
                    row.insertCell(0).innerText = desc;
                    row.insertCell(1).innerText = `‚Çπ${amount.toFixed(2)}`;
                    total += amount;
                });
                if (paymentStatus === "Partially Paid") {
                    const totalRow = summaryTable.insertRow();
                    totalRow.insertCell(0).innerHTML = '<strong>Total</strong>';
                    totalRow.insertCell(1).innerHTML = `<strong>‚Çπ${total.toFixed(2)}</strong>`;

                    const paidAmount = parseFloat(document.getElementById("mainPartialPaidAmount").value) || 0;
                    const dueAmount = total - paidAmount;

                    const paidRow = summaryTable.insertRow();
                    paidRow.insertCell(0).innerHTML = '<strong style="color: green;">Paid Amount</strong>';
                    paidRow.insertCell(1).innerHTML = `<strong style="color: green;"">‚Çπ${paidAmount.toFixed(2)}</strong>`;

                    const dueRow = summaryTable.insertRow();
                    dueRow.insertCell(0).innerHTML = '<strong style="color: red;">Due Amount</strong>';
                    dueRow.insertCell(1).innerHTML = `<strong style="color: red;"">‚Çπ${dueAmount.toFixed(2)}</strong>`;

                }
                else {

                    const totalRow = summaryTable.insertRow();
                    totalRow.insertCell(0).innerHTML = '<strong>Total</strong>';
                    totalRow.insertCell(1).innerHTML = `<strong>‚Çπ${total.toFixed(2)}</strong>`;
                }

                document.getElementById('invoice').style.display = 'block';
            }
            else { document.getElementById('commonInvoice').style.display = 'block'; }
        });


        document.getElementById('commonInvoiceForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            debugger;
            const authData = JSON.parse(localStorage.getItem("authData"));
            if (!authData || !authData.organizationname) return;

            const gstNumber = formData.get("commonGst");
            const gstPercent = document.getElementById("commonGstPercent").value;
            if (gstNumber !== "") {
                if (gstPercent === "" || isNaN(gstPercent) || parseFloat(gstPercent) <= 0) {
                    alert("Please enter a valid positive number for GST Percent.");
                    return; // stop execution
                }
            }

            const paymentStatus = document.getElementById("commonPaymentStatusDropDown").value;
            const partialPaidAmount = document.getElementById("partialPaidAmount").value;
            if (!paymentStatus) {
                alert("Please select a Payment Status before generating the invoice.");
                return;
            }
            if (paymentStatus === "Partially Paid") {
                if (partialPaidAmount == "0" || partialPaidAmount == "") {
                    alert("Please enter a valid positive number for Partial Paid Amount.");
                    return; // stop execution
                }
            }

            const orgName = authData.organizationname.trim();
            const orgTagLine = authData.websiteTagline;
            const orgWebURL = authData.websiteUrl;
            const orgWebSiteName = authData.organizationname;
            const orgEmail = authData.email;
            const orgPhone = authData.phone;
            const orgLogo = authData.logo;

            debugger;
            const invoiceNumber = formData.get('commonInvoiceNumber');
            const rawDate = formData.get('commonInvoiceDate');
            const formattedDate = formatFullDate(rawDate);

            const thanksMsg = document.getElementById("orgThanksMsg");
            const footerDetails = document.getElementById("orgFotterDetails");

            const orgNameEl = document.getElementById("orgName");
            const orgTaglineEl = document.getElementById("orgTagline");
            const orgLogoEl = document.getElementById("orgLogo");

            if (gstNumber == "") {
                document.getElementById('commonInvoiceInfo').innerHTML =
                    `<strong>Invoice No:</strong> ${invoiceNumber} &nbsp;&nbsp; <strong>Date:</strong> ${formattedDate}`;
            } else {
                document.getElementById('commonInvoiceInfo').innerHTML =
                    `<strong>Invoice No:</strong> ${invoiceNumber} &nbsp;&nbsp; <strong>Date:</strong> ${formattedDate} </br> <strong>GST No:</strong> ${gstNumber}`;
            }

            if (paymentStatus === "Paid") {
                document.getElementById('commonPaymnetStatus').innerHTML = `<div class="status-box-paid" ><strong>Payment Status:</strong> <span>${paymentStatus}</span> &nbsp;&nbsp; <strong>Payment Date:</strong> ${formattedDate}</div>`;
            } else if (paymentStatus === "Partially Paid") {
                document.getElementById('commonPaymnetStatus').innerHTML = `<div class="status-box-pppaymnet" ><strong>Payment Status:</strong> <span>${paymentStatus}</span> &nbsp;&nbsp; <strong>Payment Date:</strong> ${formattedDate}</div>`;
            }
            else {
                document.getElementById('commonPaymnetStatus').innerHTML = `<div class="status-box-other" ><strong>Payment Status:</strong> <span>${paymentStatus}</span> &nbsp;&nbsp; <strong>Payment Date:</strong> ${formattedDate}</div>`;
            }



            document.getElementById('orgName').innerHTML = orgName;
            document.getElementById('invoiceto').innerText = formData.get('commonIClient');
            document.getElementById('contactDetails').innerText = '+91-' + formData.get('commonContectDetails');
            document.getElementById('address').innerText = formData.get('commonAddress');
            document.getElementById('orgTagline').innerHTML = orgTagLine;
            orgLogoEl.src = orgLogo;
            orgLogoEl.alt = orgWebSiteName + ' ' + 'Logo';

            thanksMsg.textContent = `Thank you for choosing ${authData.organizationname}!`;
            footerDetails.innerHTML = `<a href="${orgWebURL}" target="_blank">${orgWebSiteName}</a> | ${orgEmail} | ${orgPhone}`;

            const descList = formData.getAll('desc[]');
            const priceList = formData.getAll('price[]');
            const qtyList = formData.getAll('qty[]');
            /* const amountList = formData.getAll('amount[]');*/
            const summaryTable = document.getElementById('commonSummaryTable');

            // Reset table headers
            summaryTable.innerHTML = `<tr>
                                                                                                 <th>SL.</th>
                                                                                                 <th>Item Description</th>
                                                                                                 <th>Price (‚Çπ)</th>
                                                                                                 <th>Qty.</th>
                                                                                                 <th>Amount (‚Çπ)</th>
                                                                                               </tr>`;

            let total = 0;
            descList.forEach((desc, i) => {
                const price = parseFloat(priceList[i]) || 0;
                const qty = parseFloat(qtyList[i]) || 0;
                const amount = price * qty;
                //const amount = parseFloat(amountList[i]) || 0;
                const row = summaryTable.insertRow();
                row.insertCell(0).innerText = i + 1;
                row.insertCell(1).innerText = desc;
                row.insertCell(2).innerText = `‚Çπ${price.toFixed(2)}`;
                row.insertCell(3).innerText = qty;
                row.insertCell(4).innerText = `‚Çπ${amount.toFixed(2)}`;

                total += amount;
            });
            if (gstNumber !== "") {
                const gstPercent = parseFloat(document.getElementById("commonGstPercent").value) || 0;
                const gstAmount = (total * gstPercent) / 100;
                total = total + gstAmount;
                // GST row
                const gstRow = summaryTable.insertRow();
                gstRow.insertCell(0).innerHTML = '<strong>GST (' + gstPercent + '%)</strong>';
                gstRow.insertCell(1).innerHTML = '--';
                gstRow.insertCell(2).innerHTML = '0';
                gstRow.insertCell(3).innerHTML = '0';
                gstRow.insertCell(4).innerHTML = `<strong>‚Çπ${gstAmount.toFixed(2)}</strong>`;
            }
            const totalRow = summaryTable.insertRow();
            totalRow.insertCell(0).innerHTML = '<strong>Total</strong>';
            totalRow.insertCell(1).innerHTML = '--';
            totalRow.insertCell(2).innerHTML = '0';
            totalRow.insertCell(3).innerHTML = '0';
            totalRow.insertCell(4).innerHTML = `<strong>‚Çπ${total.toFixed(2)}</strong>`;


            // Final total row
            if (paymentStatus === "Partially Paid") {
                const paidAmount = parseFloat(document.getElementById("partialPaidAmount").value) || 0;
                const dueAmount = total - paidAmount;

                const paidRow = summaryTable.insertRow();
                paidRow.insertCell(0).innerHTML = '<strong style="color: green;">Paid Amount</strong>';
                paidRow.insertCell(1).innerHTML = '--';
                paidRow.insertCell(2).innerHTML = '0';
                paidRow.insertCell(3).innerHTML = '0';
                paidRow.insertCell(4).innerHTML = `<strong style="color: green;"">‚Çπ${paidAmount.toFixed(2)}</strong>`;

                const dueRow = summaryTable.insertRow();
                dueRow.insertCell(0).innerHTML = '<strong style="color: red;">Due Amount</strong>';
                dueRow.insertCell(1).innerHTML = '--';
                dueRow.insertCell(2).innerHTML = '0';
                dueRow.insertCell(3).innerHTML = '0';
                dueRow.insertCell(4).innerHTML = `<strong style="color: red;"">‚Çπ${dueAmount.toFixed(2)}</strong>`;
            }
            document.getElementById('commonInvoice').style.display = 'block';

        });

        document.getElementById("PaymentStatusDropDown").addEventListener("change", function () {
            const value = this.value;
            const wrapper = document.getElementById("mainPartialAmountWrapper");

            if (value === "Partially Paid") {
                wrapper.style.display = "block";
                document.getElementById("mainPartialPaidAmount").value = "0"
            } else {
                wrapper.style.display = "none";
                document.getElementById("mainPartialPaidAmount").value = "0"; // clear if hidden
            }
        });

        document.getElementById("commonPaymentStatusDropDown").addEventListener("change", function () {
            const value = this.value;
            const wrapper = document.getElementById("partialAmountWrapper");

            if (value === "Partially Paid") {
                wrapper.style.display = "block";
                document.getElementById("partialPaidAmount").value = "0"
            } else {
                wrapper.style.display = "none";
                document.getElementById("partialPaidAmount").value = "0"; // clear if hidden
            }
        });

        function printCommonInvoice() {
            const invoice = document.getElementById("commonInvoice");
            if (!invoice || invoice.style.display === "none" || invoice.innerText.trim() === "") {
                alert("Please generate the invoice first.");
                return;
            }
            alert("üõà For best results: Uncheck 'Headers and footers' in your browser's print settings.");
            window.print();
        }


        function printInvoice() {
            const invoice = document.getElementById("invoice");
            if (!invoice || invoice.style.display === "none" || invoice.innerText.trim() === "") {
                alert("Please generate the invoice first.");
                return;
            }
            alert("üõà For best results: Uncheck 'Headers and footers' in your browser's print settings.");
            window.print();
        }

    </script>

</body>
</html>
